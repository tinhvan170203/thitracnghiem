import{u as B,o as D,r as c,j as a,F as S,d as i,L as q,e as w,B as F,S as V,s as _,I as T,c as j,a as f}from"./index-d7a9d146.js";import{d as L}from"./AutoAwesomeMotion-48fa26b9.js";import{D as $,d as k}from"./Cancel-2fbf4918.js";import{d as b}from"./dayjs.min-4d8c5775.js";import{D as v}from"./index-190acfca.js";import{S as C}from"./index-001a6bd7.js";import{d as E}from"./Quanlycanbo-c2a05b6b.js";import{c as I}from"./commonApi-61f68a19.js";import{D as A,a as G}from"./DialogContent-92029a8c.js";import{B as H}from"./Box-8bb7873d.js";import{G as l}from"./Grid-c843cb60.js";import{D as N}from"./DialogActions-f19e4b53.js";import"./index-4d501b15.js";import"./MenuItem-b8340fcb.js";import"./Search-ea6a5c46.js";import"./Backspace-a340e520.js";import"./base-312a79a2.js";import"./index-9875713d.js";import"./canboApi-9507ce23.js";import"./ModalLoading-fdaeba49.js";import"./LastPage-aaf572b5.js";import"./KeyboardArrowRight-1ebbd478.js";import"./Edit-46ee4309.js";import"./Toolbar-8efd9b13.js";import"./DeleteOutline-48404f0a.js";import"./MoreVertOutlined-4f317e68.js";import"./Settings-09c154bc.js";import"./Add-d0ec4414.js";import"./DialogContentText-9d0fcfa3.js";import"./axiosCommon-34ac3586.js";const P=c.forwardRef(function(t,o){return a(V,{direction:"up",ref:o,...t})}),W=_(T)({position:"absolute",right:"16px",top:"4px"}),z=j({bacham:f().required("Vui lòng chọn bậc hàm mới"),ngaylenham:f().required("Vui lòng chọn ngày có quyết định thay đổi quân hàm")}).required();function Ba({open:m,item:t,onCloseDialogChangeBacHam:o,onSubmit:d}){var u;const r=B({defaultValues:{bacham:"",ghichu:"",ngaylenham:b(Date.now())},resolver:D(z)}),[g,y]=c.useState([]),p=r.setValue;r.watch,c.useEffect(()=>{(async()=>{try{let e=await I.getBacHams();y(e.data.map(h=>({value:h._id,label:h.capham})))}catch(e){console.log(e.message)}})()},[]),c.useEffect(()=>{p("bacham",(t==null?void 0:t.bachamPopulate[0]._id)||"",{shouldValidate:!0}),p("ngaylenham",b(Date.now()),{shouldValidate:!0})},[t]);const x=async n=>{if(d){const e={...n,id_edit:t._id};await d(e),o()}},{isSubmitting:s}=r.formState;return a(S,{children:i(A,{maxWidth:"lg",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(n,e)=>{e!=="backdropClick"&&o(n,e)},open:m,TransitionComponent:P,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[i($,{style:{display:"flex",borderBottom:"1px solid #ccc",margin:"0 12px"},children:[a(L,{style:{color:"#333",fontSize:"32px"}}),i("span",{className:"text-red-800 font-semibold",children:["Thay đổi cấp bậc quân hàm đối với ",(u=t==null?void 0:t.bachamPopulate[0])==null?void 0:u.capham," ",t==null?void 0:t.hoten]}),a(W,{disabled:s,onClick:()=>o(),children:a(k,{style:{color:`${s?"#ccc":"#d32b2b"}`}})})]}),a(G,{children:i(H,{children:[s?a(q,{}):"",i("form",{onSubmit:r.handleSubmit(x),style:{width:"100%"},children:[i(l,{container:!0,spacing:1,style:{alignItems:"center",justifyContent:"center"},children:[a(l,{item:!0,xs:12,md:2,lg:2,children:a(C,{name:"bacham",form:r,label:"Bậc quân hàm mới *",disabled:!1,options:g})}),a(l,{item:!0,xs:12,md:3,lg:3,children:a(v,{name:"ngaylenham",form:r,label:"Ngày nhận quyết định thay đổi quân hàm *",disabled:!1})}),a(l,{item:!0,xs:12,md:7,lg:7,children:a(w,{name:"ghichu",form:r,label:"Ghi chú",type:"text",disabled:!1})})]}),a(N,{children:i(F,{color:"primary",variant:"contained",disabled:s,type:"submit",style:{margin:"4px auto"},children:[a(E,{}),a("span",{children:"Lưu dữ liệu"})]})})]})]})})]})})}export{Ba as default};
