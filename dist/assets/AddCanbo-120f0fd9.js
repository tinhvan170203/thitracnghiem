import{c as z,a as s,u as O,o as F,g as _,i as j,r,d as h,j as a,P as K,e as m,B as p}from"./index-84f46720.js";import{d as B}from"./Add-578e0eb2.js";import{d as E}from"./Backspace-2f4d6f3e.js";import{S as i}from"./index-de4d12fd.js";import{D as o}from"./index-faa10292.js";import{c as f}from"./commonApi-f45be029.js";import{d}from"./dayjs.min-321a62c3.js";import{c as H}from"./canboApi-097b6b89.js";import"./MenuItem-6d965a5b.js";import"./index-4d501b15.js";import"./Grid-ff6f187a.js";import"./DialogActions-d9fa00ea.js";import"./DialogContent-c75aa98b.js";import"./axiosCommon-f4db16ce.js";const $=z({hoten:s().required("Vui lòng nhập họ tên cán bộ"),CCCD:s().required("Vui lòng nhập đầy đủ 12 số CCCD"),bacham:s().required("Vui lòng chọn bậc hàm"),hesoluong:s().required("Vui lòng chọn hệ số lương"),trinhdohocvan:s().required("Vui lòng chọn trình độ học vấn"),lyluanchinhtri:s().required("Vui lòng chọn trình độ lý luận chính trị"),chucvu:s().required("Vui lòng chọn chức vụ"),donvi:s().required("Vui lòng chọn đơn vị công tác"),doi:s().required("Vui lòng chọn đội công tác"),ngaylenham:s().required("Vui lòng chọn ngày lên quân hàm tương ứng với quân hàm đã chọn"),ngaylenluong:s().required("Vui lòng chọn ngày lên lương tương ứng với hệ số lương đã chọn"),ngaygiuchucvu:s().required("Vui lòng chọn ngày giữ chức vụ"),ngayvedonvi:s().required("Vui lòng chọn ngày chuyển công tác về đơn vị"),ngayvedoi:s().required("Vui lòng chọn ngày nhận công tác về đội công tác, công an xã")}).required(),ea=()=>{const e=O({defaultValues:{hoten:"",ngaysinh:d(Date.now()),thedang:"",bacham:"",hesoluong:"",chucvu:"",sohieuCAND:"",gioitinh:"Nam",trinhdohocvan:"",baohiemyte:"",ngayvaodang:d(""),lyluanchinhtri:"",quequan:"",CCCD:"033",donvi:"",doi:"",ngaylenham:d(Date.now()),ngaylenluong:d(Date.now()),ngayvedonvi:d(Date.now()),ngayvedoi:d(Date.now()),ngaygiuchucvu:d(Date.now())},resolver:F($)}),b=e.watch,t=e.setValue;e.formState;const g=_(),{enqueueSnackbar:c}=j(),[x,y]=r.useState(null),[w,N]=r.useState(null),[C,D]=r.useState(null),[q,V]=r.useState([]),[S,T]=r.useState([]);r.useEffect(()=>{(async()=>{try{let l=await f.getDataForAddCanbo(),u=l.data.capbac.map(n=>({value:n._id,label:n.capham}));y(u),D(l.data.hesoluong.map(n=>({value:n._id,label:n.hesoluong}))),N(l.data.chucvu.map(n=>({value:n._id,label:n.tenchucvu}))),V(l.data.donvis.map(n=>({value:n._id,label:n.tendonvi})))}catch(l){l.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(g("/login"),c(l.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"})),c(l.response.data.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"})}})()},[]),r.useEffect(()=>{(async()=>{t("doi","",{shouldValidate:!0});try{if(b("donvi")!==""){let l=await f.getDoiOfDonviChanged(b("donvi"));T(l.data.dois.map(u=>({value:u._id,label:u.tendoi})))}}catch(l){console.log(l),l.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(g("/login"),c(l.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"})),c(l.response.data.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"})}})()},[b("donvi")]);const k=()=>{e.reset()},A=async v=>{try{await H.addCanbo(v),c("Thêm mới cán bộ thành công!",{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"success"}),t("hoten","",{}),t("sohieuCAND","",{}),t("thedang","",{shouldValidate:!0}),t("baohiemyte","",{shouldValidate:!0}),t("CCCD",""),t("quequan","",{shouldValidate:!0})}catch(l){l.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(g("/login"),c(l.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"})),c(l.response.data.message,{anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"error"})}};return h("div",{className:"mx-2 bg-white pb-2 px-4",children:[a("img",{className:"w-[80px] m-auto mt-2 pt-2",src:"https://thuviensocongantinhhungyen.vercel.app/cong-an-hieu.png",alt:"anhnen"}),a("h1",{className:"text-center text-xl font-bold py-4",children:"Thu thập thông tin dữ liệu cán bộ trong Công an"}),a("h3",{className:"my-2 text-red-700 font-bold",children:"Lưu ý: Tạo mới cán bộ chỉ được thực hiện đối với cán bộ nhận công tác tại Công an tỉnh lần đầu tiên, cần kiểm tra kỹ lại xem trong hệ thống có dữ liệu của cán bộ đó chưa để tránh việc trùng lặp dữ liệu."}),h("div",{className:"flex flex-wrap space-x-2 items-start",children:[a("div",{className:"lg:basis-1/6 md:basis-1/4 sm:basis-1/3",children:a(K,{children:a("img",{className:"w-full",alt:"img",src:"https://static.vecteezy.com/system/resources/previews/000/376/489/original/add-user-vector-icon.jpg"})})}),a("div",{className:"flex flex-1 flex-wrap",children:h("form",{onSubmit:e.handleSubmit(A),children:[h("div",{className:"flex flex-1 flex-wrap",children:[a("div",{className:"px-1 2xl:basis-1/5 xl:basis-1/5 lg:basis-1/4 md:basis-1/2 sm:w-full w-full",children:a(m,{name:"hoten",form:e,label:"Họ tên *",type:"text",disabled:!1})}),a("div",{className:"px-1 self-center 2xl:basis-1/6 xl:basis-1/5 lg:basis-1/4 md:basis-1/2 sm:w-full w-full",children:a(o,{name:"ngaysinh",form:e,label:"Ngày sinh",disabled:!1})}),a("div",{className:"px-1 self-center 2xl:basis-1/12 xl:basis-1/12 lg:basis-1/4 md:basis-1/8 sm:basis-1/2 basis-1/2",children:a(i,{name:"gioitinh",form:e,label:"Giới tính",options:[{label:"Nam",value:"Nam"},{label:"Nữ",value:"Nữ"}],disabled:!1})}),a("div",{className:"px-1 2xl:basis-1/6 xl:basis-1/6 lg:basis-1/4 md:basis-1/2 sm:basis-1/2 basis-1/2",children:a(m,{name:"sohieuCAND",form:e,label:"Số hiệu CAND",type:"text",disabled:!1})}),a("div",{className:"px-1 2xl:basis-1/6 xl:basis-1/6 md:basis-1/2 sm:basis-1/2 basis-1/2",children:a(m,{name:"CCCD",form:e,label:"Số CCCD *",type:"number",disabled:!1})}),a("div",{className:"px-1 2xl:flex-1 xl:basis-1/6 md:basis-1/2 sm:basis-1/2 basis-1/2",children:a(m,{name:"thedang",form:e,label:"Số Thẻ đảng viên",type:"text",disabled:!1})}),a("div",{className:"px-1 2xl:basis-1/3 xl:basis-1/3 md:basis-1/2 sm:w-full w-full",children:a(m,{name:"quequan",form:e,label:"Quê quán",type:"text",disabled:!1})}),a("div",{className:"px-1 2xl:basis-1/6 xl:basis-1/6 md:basis-1/2 sm:w-full w-full",children:a(i,{name:"bacham",form:e,label:"Bậc hàm *",disabled:!1,options:x})}),a("div",{className:"px-1 2xl:basis-1/6 xl:basis-1/6 md:basis-1/2 sm:w-full w-full",children:a(i,{name:"hesoluong",form:e,label:"Hệ số lương *",disabled:!1,options:C})}),a("div",{className:"px-1 2xl:basis-1/3 xl:basis-1/3 md:basis-1/2 sm:w-full w-full",children:a(i,{name:"chucvu",form:e,label:"Chức vụ *",disabled:!1,options:w})}),a("div",{className:"px-1 2xl:basis-1/4 xl:basis-1/4 lg:basis-1/4 md:basis-1/2 w-full",children:a(m,{name:"baohiemyte",form:e,label:"Số thẻ bảo hiểm y tế",type:"text",disabled:!1})}),a("div",{className:"px-1 2xl:basis-1/4 xl:basis-1/4 lg:basis-1/4 md:basis-1/2 sm:w-full w-full",children:a(i,{name:"trinhdohocvan",form:e,label:"Trình độ học vấn *",disabled:!1,options:[{label:"Đại học",value:"Đại học"},{label:"Cao đẳng",value:"Cao đẳng"},{label:"Trung cấp",value:"Trung cấp"},{label:"Sơ cấp",value:"Sơ cấp"},{label:"Khác",value:"Khác"}]})}),a("div",{className:"px-1 2xl:basis-1/4 xl:basis-1/4 lg:basis-1/4 md:basis-1/2 sm:w-full w-full",children:a(i,{name:"lyluanchinhtri",form:e,label:"Trình độ lý luận chính trị",disabled:!1,options:[{label:"Cao cấp",value:"Cao cấp"},{label:"Trung cấp",value:"Trung cấp"},{label:"Sơ cấp",value:"Sơ cấp"},{label:"Khác",value:"Khác"}]})}),a("div",{className:"px-1 self-center 2xl:basis-1/4 xl:basis-1/4 lg:basis-1/4 md:basis-1/2 sm:w-full w-full",children:a(o,{name:"ngayvaodang",form:e,label:"Ngày kết nạp Đảng",disabled:!1})}),a("div",{className:"px-1 2xl:basis-1/4 xl:basis-1/4 lg:basis-1/4 md:basis-1/2 sm:w-full w-full",children:a(i,{name:"donvi",form:e,label:"Đơn vị công tác *",disabled:!1,options:q})}),a("div",{className:"px-1 2xl:basis-1/4 xl:basis-1/4 lg:basis-1/4 md:basis-1/2 sm:w-full w-full",children:a(i,{name:"doi",form:e,label:"Đội công tác, công an xã, phường, thị trấn *",disabled:!1,options:S})}),a("div",{className:"px-1 self-center 2xl:basis-1/4 xl:basis-1/4 lg:basis-1/4 md:basis-1/2 sm:w-full w-full",children:a(o,{name:"ngaylenham",form:e,label:"Ngày lên quân hàm so với quân hàm hiện tại *",disabled:!1})}),a("div",{className:"px-1 self-center 2xl:basis-1/4 xl:basis-1/4 lg:basis-1/4 md:basis-1/2 sm:w-full w-full",children:a(o,{name:"ngaylenluong",form:e,label:"Ngày lên lương so với hệ số lương hiện tại *",disabled:!1})}),a("div",{className:"px-1 self-center 2xl:basis-1/3 xl:basis-1/3 lg:basis-1/3 md:basis-1/2 sm:w-full w-full",children:a(o,{name:"ngaygiuchucvu",form:e,label:"Ngày giữ chức vụ công tác *",disabled:!1})}),a("div",{className:"px-1 self-center 2xl:basis-1/3 xl:basis-1/3 lg:basis-1/3 md:basis-1/2 sm:w-full w-full",children:a(o,{name:"ngayvedonvi",form:e,label:"Ngày nhận quyết định về đơn vị công tác *",disabled:!1})}),a("div",{className:"px-1 self-center 2xl:basis-1/3 xl:basis-1/3 lg:basis-1/3 md:basis-1/2 sm:w-full w-full",children:a(o,{name:"ngayvedoi",form:e,label:"Ngày nhận quyết định về đội công tác hoặc công an xã, phường, thị trấn *",disabled:!1})})]}),h("div",{className:"flex items-center justify-center space-x-2 my-2",children:[h(p,{color:"primary",variant:"contained",type:"submit",style:{marginRight:"4px"},children:[a(B,{}),a("span",{children:"Thêm mới cán bộ"})]}),h(p,{variant:"contained",onClick:k,color:"warning",children:[a("span",{className:"mr-2",children:"Xóa trắng"}),a(E,{})]})]})]})})]})]})};export{ea as default};
